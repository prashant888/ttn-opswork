<%= config_option 'server-url', node.graylog2[:collector][:server_url],  enclose: '"' -%>
<%= config_option 'message-buffer-size', node.graylog2[:collector][:buffer_size] -%>
<%= config_option 'collector-id', node.graylog2[:collector][:id], enclose: '"' -%>

metrics {
  <%= config_option 'enable-logging', node.graylog2[:collector][:metrics][:enable_logging] -%>
  <%= config_option 'log-duration', node.graylog2[:collector][:metrics][:log_duration] -%>
}

inputs {
  <% node.graylog2[:collector][:inputs].each_pair do |name, options| -%>
  <%= name %> {
    <% options.each_pair do |key, value| -%>
    <%= config_option key, value, enclose: '"' -%>
    <% end %>
  }
  <% end %>
}

outputs {
  <% node.graylog2[:collector][:outputs].each_pair do |name, options| -%>
  <%= name %> {
    <% options.each_pair do |key, value| -%>
    <%= config_option key, value, enclose: '"' -%>
    <% end %>
  }
  <% end %>
}
